(this["webpackJsonpecoled-collage"]=this["webpackJsonpecoled-collage"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),i=n(51),r=n.n(i),l=(n(67),n(34)),c=n(16),s=n(52),d=n(53),u=n.n(d),f=n(19),h=n(33),g=n(54),m=n.n(g),p=n(28),b=n(137);n(121);function y(){var e=Object(s.a)(["\n  query query {\n    products(first: 1, query: \"title:'Ecoled Blade One'\") {\n      edges {\n        node {\n          id\n          title\n          images(first: 1) {\n            edges {\n              node {\n                originalSrc\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return y=function(){return e},e}var w=m()(y()),v=Object(b.a)({outerContainer:{height:"100vh",display:"flex"},stageContainerBeforeUpload:{},stageContainerAfterUpload:{width:"100%",alignContent:"center",alignItems:"center"},buttonContainerAfterUpload:{width:"100%",position:"absolute",bottom:0,display:"flex",justifyContent:"space-evenly"},buttonContainerBeforeUpload:{width:"100%"},singleButtonContainerBeforeUpload:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},singleButtonContainerAfterUpload:{width:"48%",display:"flex",justifyContent:"center",alignItems:"center"},button:{background:"#252a2b",fontFamily:"Work Sans",fontStyle:"normal",color:"white",border:"2px solid transparent",fontWeight:700,textTransform:"uppercase",cursor:"pointer",borderRadius:0,padding:"15px 30px",textAlign:"center",width:"100%",alignSelf:"stretch"},buttonLabel:{width:"100%"},buttonBeforeUpload:{background:"#252a2b",fontFamily:"Work Sans",fontStyle:"normal",color:"white",border:"2px solid transparent",fontWeight:700,textTransform:"uppercase",cursor:"pointer",borderRadius:0,padding:"15px 30px",width:"50%",display:"flex",alignSelf:"center",justifyContent:"center"}}),x=function(e){var t,n=e.data,a=e.shapeProps,i=e.isSelected,r=e.onSelect,s=e.onChange;n&&(t=n.products.edges[0].node.images.edges[0].node.originalSrc);var d=u()(t,"Anonymous"),h=Object(c.a)(d,1)[0],g=o.a.useRef(),m=o.a.useRef();return o.a.useEffect((function(){i&&(m.current.setNode(g.current),m.current.getLayer().batchDraw())}),[i]),o.a.createElement(o.a.Fragment,null,o.a.createElement(f.Image,Object.assign({crossOrigin:"anonymus",fill:"",image:h,onTap:r,onClick:r,ref:g},a,{draggable:!0,onDragEnd:function(e){s(Object(l.a)({},a,{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var t=g.current,n=t.scaleX(),o=t.scaleY();t.scaleX(1),t.scaleY(1),s(Object(l.a)({},a,{x:t.x(),y:t.y(),width:Math.max(5,t.width()*n),height:Math.max(t.height()*o)}))}})),i&&o.a.createElement(f.Transformer,{ref:m,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}}))},C=function(){var e=v(),t=Object(h.a)(w).data,n=o.a.createRef(),a=new Image,i=o.a.useState(null),r=Object(c.a)(i,2),l=r[0],s=r[1],d=o.a.useState(null),u=Object(c.a)(d,2),g=u[0],m=u[1],b=o.a.useState(!1),y=Object(c.a)(b,2),C=y[0],E=y[1],S=o.a.useState(window.innerHeight),j=Object(c.a)(S,2),B=j[0],O=j[1],U=o.a.useState(window.innerWidth),k=Object(c.a)(U,2),A=k[0],W=k[1],N=o.a.useState(null),T=Object(c.a)(N,2),I=T[0],R=T[1];o.a.useEffect((function(){window.onorientationchange=function(){var e=B,t=A;if(l){var n=p.scale(l,{maxWidth:e,maxHeight:t});console.log(n),m(n);var a=(e-n.width)/2,o=t-n.height;R({x:a,y:o/2,width:150,height:240})}O(t),W(e)}}),[l,a]);var F=!1;null!==l&&(F=!0);var L,q;if(g){if(g.width<A)L=(A-g.width)/2;if(g.height<B)q=(B-g.height)/2;null===I&&R({x:L,y:q,width:150,height:240})}return o.a.createElement("div",{className:e.outerContainer},o.a.createElement("div",{className:F?e.stageContainerAfterUpload:e.stageContainerBeforeUpload},o.a.createElement(f.Stage,{visible:F,ref:n,width:A,height:B},o.a.createElement(f.Layer,{onClick:function(){E(!1)},onTap:function(){E(!1)}},o.a.createElement(f.Image,{x:L,y:q,image:g})),o.a.createElement(f.Layer,{visible:F},o.a.createElement(x,{data:t,shapeProps:I,isSelected:C,onSelect:function(){E(!0)},onChange:R})))),o.a.createElement("div",{className:F?e.buttonContainerAfterUpload:e.buttonContainerBeforeUpload},o.a.createElement("div",{className:F?e.singleButtonContainerAfterUpload:e.singleButtonContainerBeforeUpload},o.a.createElement("label",{className:F?e.button:e.buttonBeforeUpload,htmlFor:"files"},"Bild hochladen",o.a.createElement("input",{id:"files",visibility:"hidden",type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){var t=Object(c.a)(e.target.files,1)[0];t&&p(t,(function(e){var t=p.scale(e,{maxWidth:A,maxHeight:B});console.log(t),m(t),s(e)}),{orientation:!0})}}))),o.a.createElement("div",{style:F?{visibility:"visible"}:{visibility:"hidden"},className:e.singleButtonContainerAfterUpload},o.a.createElement("label",{className:e.button,onClick:function(){!function(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(n.current.toDataURL({mimeType:"image/png"}),"collage.png")}},"Bild Speichern"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var E=n(17),S=n(59),j=n(60),B=n(61),O=n(12),U=new j.a,k=new B.a({uri:"https://picture-collage-development-store.myshopify.com/api/graphql"}),A=Object(S.a)((function(){return{headers:{"X-Shopify-Storefront-Access-Token":"6ffce0a3460c1eac5a62e776d6d292bb"}}})),W=new E.a({link:A.concat(k),cache:U});r.a.render(o.a.createElement(O.a,{client:W},o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,n){e.exports=n(127)},67:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.5652f720.chunk.js.map