(this["webpackJsonpecoled-collage"]=this["webpackJsonpecoled-collage"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),o=n(50),r=n.n(o),l=(n(67),n(35)),c=n(15),s=n(51),d=n(52),u=n.n(d),h=n(19),f=n(34),g=n(53),m=n.n(g),p=n(28),b=n(136),y=n(54);function w(){var e=Object(s.a)(["\n  query query {\n    products(first: 1, query: \"title:'Ecoled Blade One'\") {\n      edges {\n        node {\n          id\n          title\n          images(first: 10) {\n            edges {\n              node {\n                originalSrc\n                altText\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return w=function(){return e},e}var v=m()(w()),x=Object(b.a)({outerContainer:{height:"100vh",display:"flex"},stageContainerBeforeUpload:{},stageContainerAfterUpload:{width:"100%",alignContent:"center",alignItems:"center"},buttonContainerAfterUpload:{width:"100%",position:"absolute",bottom:0,display:"flex",justifyContent:"space-evenly"},buttonContainerBeforeUpload:{width:"100%"},singleButtonContainerBeforeUpload:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},singleButtonContainerAfterUpload:{width:"48%",display:"flex",justifyContent:"center",alignItems:"center"},button:{background:"#252a2b",fontFamily:"sans-serif",fontStyle:"normal",color:"white",border:"2px solid transparent",fontWeight:700,textTransform:"uppercase",cursor:"pointer",borderRadius:0,padding:"15px 30px",textAlign:"center",width:"100%",alignSelf:"stretch"},buttonLabel:{width:"100%"},buttonBeforeUpload:{background:"#252a2b",fontFamily:"sans-serif",fontStyle:"normal",color:"white",border:"2px solid transparent",fontWeight:700,textTransform:"uppercase",cursor:"pointer",borderRadius:0,padding:"15px 30px",width:"50%",display:"flex",alignSelf:"center",justifyContent:"center"}}),C=function(e){var t=e.data,n=e.shapeProps,a=e.isSelected,o=e.onSelect,r=e.onChange,s=i.a.useState(null),d=Object(c.a)(s,2),f=d[0],g=d[1];t&&null===f&&t.products.edges[0].node.images.edges.forEach((function(e){"collage"===e.node.altText&&g(e.node.originalSrc)}));var m=u()(f,"Anonymous"),p=Object(c.a)(m,1)[0],b=i.a.useRef(),y=i.a.useRef();return i.a.useEffect((function(){a&&(y.current.setNode(b.current),y.current.getLayer().batchDraw())}),[a]),i.a.createElement(i.a.Fragment,null,i.a.createElement(h.Image,Object.assign({crossOrigin:"anonymus",fill:"",image:p,onTap:o,onClick:o,ref:b},n,{draggable:!0,onDragEnd:function(e){r(Object(l.a)({},n,{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var t=b.current,a=t.scaleX(),i=t.scaleY();t.scaleX(1),t.scaleY(1),r(Object(l.a)({},n,{x:t.x(),y:t.y(),width:Math.max(5,t.width()*a),height:Math.max(t.height()*i)}))}})),a&&i.a.createElement(h.Transformer,{ref:y,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}}))},E=function(){var e=x(),t=Object(f.a)(v).data,n=i.a.createRef(),a=new Image,o=i.a.useState(null),r=Object(c.a)(o,2),l=r[0],s=r[1],d=i.a.useState(null),u=Object(c.a)(d,2),g=u[0],m=u[1],b=i.a.useState(!1),w=Object(c.a)(b,2),E=w[0],j=w[1],S=i.a.useState(window.innerHeight),O=Object(c.a)(S,2),B=O[0],U=O[1],k=i.a.useState(window.innerWidth),A=Object(c.a)(k,2),T=A[0],N=A[1],I=i.a.useState(null),W=Object(c.a)(I,2),R=W[0],F=W[1],L=i.a.useState(null),q=Object(c.a)(L,2),H=q[0],M=q[1],D=i.a.useState(null),X=Object(c.a)(D,2),J=X[0],P=X[1];function Y(){!0===window.matchMedia("(orientation: portrait)").matches?M("landscape"):M("portrait");var e=B,t=T;if(l){var n=p.scale(l,{maxWidth:e,maxHeight:t});m(n);var a=(e-n.width)/2,i=(t-n.height)/2;P({x:a,y:i}),F({x:a,y:i,width:150,height:240})}U(t),N(e)}i.a.useEffect((function(){window.onorientationchange=function(){var e=this;Y(),this.setTimeout((function(){e.window.innerHeight!==B&&Y()}),400)}}),[l,a]);var $=!1;null!==l&&($=!0);return!1===window.matchMedia("(orientation: ".concat(H," )"))&&Y(),i.a.createElement("div",{className:e.outerContainer},i.a.createElement("div",{className:$?e.stageContainerAfterUpload:e.stageContainerBeforeUpload},i.a.createElement(h.Stage,{visible:$,ref:n,width:T,height:B},i.a.createElement(h.Layer,{onClick:function(){j(!1)},onTap:function(){j(!1)}},i.a.createElement(h.Image,{x:R?J.x:0,y:R?J.y:0,image:g})),i.a.createElement(h.Layer,{visible:$},i.a.createElement(C,{data:t,shapeProps:R,isSelected:E,onSelect:function(){j(!0)},onChange:F})))),i.a.createElement("div",{className:$?e.buttonContainerAfterUpload:e.buttonContainerBeforeUpload},i.a.createElement("div",{className:$?e.singleButtonContainerAfterUpload:e.singleButtonContainerBeforeUpload},i.a.createElement("label",{className:$?e.button:e.buttonBeforeUpload,htmlFor:"files"},"Bild hochladen",i.a.createElement("input",{id:"files",visibility:"hidden",type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){var t=Object(c.a)(e.target.files,1)[0];t&&p(t,(function(e){var t,n,a=p.scale(e,{maxWidth:T,maxHeight:B});(m(a),s(e),a.width<T)&&(t=(T-a.width)/2);a.height<B&&(n=(B-a.height)/2);P({x:t,y:n}),null===R&&F({x:t,y:n,width:150,height:240})}),{orientation:!0})}}))),i.a.createElement("div",{style:$?{visibility:"visible"}:{visibility:"hidden"},className:e.singleButtonContainerAfterUpload},i.a.createElement("label",{className:e.button,onClick:function(){j(!1);var e=n.current.toDataURL({mimeType:"image/png"});Object(y.saveAs)(e,"collage.png")}},"Bild Speichern"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var j=n(17),S=n(59),O=n(60),B=n(61),U=n(12),k=new O.a,A=new B.a({uri:"https://picture-collage-development-store.myshopify.com/api/graphql"}),T=Object(S.a)((function(){return{headers:{"X-Shopify-Storefront-Access-Token":"6ffce0a3460c1eac5a62e776d6d292bb"}}})),N=new j.a({link:T.concat(A),cache:k});r.a.render(i.a.createElement(U.a,{client:N},i.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,n){e.exports=n(127)},67:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.5fba1a83.chunk.js.map