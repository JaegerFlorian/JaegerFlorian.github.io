(this["webpackJsonpecoled-collage"]=this["webpackJsonpecoled-collage"]||[]).push([[0],{111:function(e,n,a){"use strict";a.r(n);var t=a(3),r=a.n(t),c=a(42),o=a.n(c),i=(a(58),a(29)),l=a(18),s=a(43),d=a(44),u=a.n(d),g=a(16),f=a(28),h=a(45);function m(){var e=Object(s.a)(["\n  query query {\n    products(first: 1, query: \"title:'Ecoled Blade One'\") {\n      edges {\n        node {\n          id\n          title\n          images(first: 1) {\n            edges {\n              node {\n                originalSrc\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}var p=a.n(h)()(m()),b=function(e){var n,a=e.data,t=e.shapeProps,c=e.isSelected,o=e.onSelect,s=e.onChange;a&&(n=a.products.edges[0].node.images.edges[0].node.originalSrc);var d=u()(n),f=Object(l.a)(d,1)[0];f&&(f.crossOrigin="Anonymous",f.SameSite="None",f.Secure=!0);var h=r.a.useRef(),m=r.a.useRef();return r.a.useEffect((function(){c&&(m.current.setNode(h.current),m.current.getLayer().batchDraw())}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(g.Image,Object.assign({crossOrigin:!0,fill:"",image:f,onTap:o,onClick:o,ref:h},t,{draggable:!0,onDragEnd:function(e){s(Object(i.a)({},t,{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=h.current,a=n.scaleX(),r=n.scaleY();n.scaleX(1),n.scaleY(1),s(Object(i.a)({},t,{x:n.x(),y:n.y(),width:Math.max(5,n.width()*a),height:Math.max(n.height()*r)}))}})),c&&r.a.createElement(g.Transformer,{ref:m,boundBoxFunc:function(e,n){return n.width<5||n.height<5?e:n}}))},y=function(){var e=Object(f.a)(p).data,n=r.a.useRef(null),a=r.a.createRef(),t=r.a.useRef(),c=r.a.useRef(),o=new Image,i=r.a.useState(null),s=Object(l.a)(i,2),d=s[0],u=s[1],h=r.a.useState(!1),m=Object(l.a)(h,2),y=m[0],w=m[1],v=r.a.useState({x:10,y:10,width:200,height:320}),E=Object(l.a)(v,2),x=E[0],O=E[1];return r.a.createElement("div",null,r.a.createElement(g.Stage,{ref:a,width:window.innerWidth,height:window.innerHeight},r.a.createElement(g.Layer,{ref:c,onClick:function(){w(!1)},onTap:function(){w(!1)}},r.a.createElement(g.Image,{image:d})),r.a.createElement(g.Layer,{ref:t},r.a.createElement(b,{data:e,shapeProps:x,isSelected:y,onSelect:function(){w(!0)},onChange:O}))),r.a.createElement("label",{htmlFor:"files",className:"btn",style:{border:"1px solid",display:"inline block",padding:"6px 12px",cursor:"pointer"}},"Bild hochladen",r.a.createElement("input",{id:"files",visibility:"hidden",type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){w(!1);var n=c.current,a=n.getContext("2d");o.onload=function(){o.crossOrigin="Anonymus",u(o),a.drawImage(o,0,0)};var t=Object(l.a)(e.target.files,1)[0];if(t){var r=new FileReader;r.readAsDataURL(t),r.onload=function(e){a.clearRect(0,0,n.canvas.width,n.canvas.height),o.src=e.target.result}}},ref:n})),r.a.createElement("label",{class:"btn",style:{border:"1px solid",display:"inline block",padding:"6px 12px",cursor:"pointer"},onClick:function(){!function(e,n){var a=document.createElement("a");a.download=n,a.href=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}(a.current.toDataURL({mimeType:"image/png"}),"stage.png")}},"Bild speichern"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(15),v=a(50),E=a(51),x=a(52),O=a(12),S=new E.a,k=new x.a({uri:"https://picture-collage-development-store.myshopify.com/api/graphql"}),j=Object(v.a)((function(){return{headers:{"X-Shopify-Storefront-Access-Token":"6ffce0a3460c1eac5a62e776d6d292bb"}}})),R=new w.a({link:j.concat(k),cache:S});o.a.render(r.a.createElement(O.a,{client:R},r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e,n,a){e.exports=a(111)},58:function(e,n,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.9c2a2f24.chunk.js.map