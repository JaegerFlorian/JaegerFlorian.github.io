(this["webpackJsonpecoled-collage"]=this["webpackJsonpecoled-collage"]||[]).push([[0],{128:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),i=n(51),r=n.n(i),l=(n(68),n(35)),c=n(16),s=n(52),d=n(53),u=n.n(d),f=n(19),h=n(34),g=n(54),m=n.n(g),p=n(28),b=n(138),y=(n(122),n(55));function w(){var e=Object(s.a)(["\n  query query {\n    products(first: 1, query: \"title:'Ecoled Blade One'\") {\n      edges {\n        node {\n          id\n          title\n          images(first: 1) {\n            edges {\n              node {\n                originalSrc\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return w=function(){return e},e}var v=m()(w()),x=Object(b.a)({outerContainer:{height:"100vh",display:"flex"},stageContainerBeforeUpload:{},stageContainerAfterUpload:{width:"100%",alignContent:"center",alignItems:"center"},buttonContainerAfterUpload:{width:"100%",position:"absolute",bottom:0,display:"flex",justifyContent:"space-evenly"},buttonContainerBeforeUpload:{width:"100%"},singleButtonContainerBeforeUpload:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},singleButtonContainerAfterUpload:{width:"48%",display:"flex",justifyContent:"center",alignItems:"center"},button:{background:"#252a2b",fontFamily:"Work Sans",fontStyle:"normal",color:"white",border:"2px solid transparent",fontWeight:700,textTransform:"uppercase",cursor:"pointer",borderRadius:0,padding:"15px 30px",textAlign:"center",width:"100%",alignSelf:"stretch"},buttonLabel:{width:"100%"},buttonBeforeUpload:{background:"#252a2b",fontFamily:"Work Sans",fontStyle:"normal",color:"white",border:"2px solid transparent",fontWeight:700,textTransform:"uppercase",cursor:"pointer",borderRadius:0,padding:"15px 30px",width:"50%",display:"flex",alignSelf:"center",justifyContent:"center"}}),C=function(e){var t,n=e.data,a=e.shapeProps,i=e.isSelected,r=e.onSelect,s=e.onChange;n&&(t=n.products.edges[0].node.images.edges[0].node.originalSrc);var d=u()(t,"Anonymous"),h=Object(c.a)(d,1)[0],g=o.a.useRef(),m=o.a.useRef();return o.a.useEffect((function(){i&&(m.current.setNode(g.current),m.current.getLayer().batchDraw())}),[i]),o.a.createElement(o.a.Fragment,null,o.a.createElement(f.Image,Object.assign({crossOrigin:"anonymus",fill:"",image:h,onTap:r,onClick:r,ref:g},a,{draggable:!0,onDragEnd:function(e){s(Object(l.a)({},a,{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var t=g.current,n=t.scaleX(),o=t.scaleY();t.scaleX(1),t.scaleY(1),s(Object(l.a)({},a,{x:t.x(),y:t.y(),width:Math.max(5,t.width()*n),height:Math.max(t.height()*o)}))}})),i&&o.a.createElement(f.Transformer,{ref:m,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}}))},E=function(){var e=x(),t=Object(h.a)(v).data,n=o.a.createRef(),a=new Image,i=o.a.useState(null),r=Object(c.a)(i,2),l=r[0],s=r[1],d=o.a.useState(null),u=Object(c.a)(d,2),g=u[0],m=u[1],b=o.a.useState(!1),w=Object(c.a)(b,2),E=w[0],S=w[1],j=o.a.useState(window.innerHeight),B=Object(c.a)(j,2),O=B[0],U=B[1],k=o.a.useState(window.innerWidth),A=Object(c.a)(k,2),W=A[0],N=A[1],T=o.a.useState(null),I=Object(c.a)(T,2),R=I[0],F=I[1];o.a.useEffect((function(){window.onorientationchange=function(){var e=O,t=W;if(l){var n=p.scale(l,{maxWidth:e,maxHeight:t});m(n);var a=(e-n.width)/2,o=t-n.height;F({x:a,y:o/2,width:150,height:240})}U(t),N(e)}}),[l,a]);var L=!1;null!==l&&(L=!0);var q,D;if(g){if(g.width<W)q=(W-g.width)/2;if(g.height<O)D=(O-g.height)/2;null===R&&F({x:q,y:D,width:150,height:240})}return o.a.createElement("div",{className:e.outerContainer},o.a.createElement("div",{className:L?e.stageContainerAfterUpload:e.stageContainerBeforeUpload},o.a.createElement(f.Stage,{visible:L,ref:n,width:W,height:O},o.a.createElement(f.Layer,{onClick:function(){S(!1)},onTap:function(){S(!1)}},o.a.createElement(f.Image,{x:q,y:D,image:g})),o.a.createElement(f.Layer,{visible:L},o.a.createElement(C,{data:t,shapeProps:R,isSelected:E,onSelect:function(){S(!0)},onChange:F})))),o.a.createElement("div",{className:L?e.buttonContainerAfterUpload:e.buttonContainerBeforeUpload},o.a.createElement("div",{className:L?e.singleButtonContainerAfterUpload:e.singleButtonContainerBeforeUpload},o.a.createElement("label",{className:L?e.button:e.buttonBeforeUpload,htmlFor:"files"},"Bild hochladen",o.a.createElement("input",{id:"files",visibility:"hidden",type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){var t=Object(c.a)(e.target.files,1)[0];t&&p(t,(function(e){var t=p.scale(e,{maxWidth:W,maxHeight:O});m(t),s(e)}),{orientation:!0})}}))),o.a.createElement("div",{style:L?{visibility:"visible"}:{visibility:"hidden"},className:e.singleButtonContainerAfterUpload},o.a.createElement("label",{className:e.button,onClick:function(){S(!1);var e=n.current.toDataURL({mimeType:"image/png"});Object(y.saveAs)(e,"collage.png")}},"Bild Speichern"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=n(17),j=n(60),B=n(61),O=n(62),U=n(12),k=new B.a,A=new O.a({uri:"https://picture-collage-development-store.myshopify.com/api/graphql"}),W=Object(j.a)((function(){return{headers:{"X-Shopify-Storefront-Access-Token":"6ffce0a3460c1eac5a62e776d6d292bb"}}})),N=new S.a({link:W.concat(A),cache:k});r.a.render(o.a.createElement(U.a,{client:N},o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,n){e.exports=n(128)},68:function(e,t,n){}},[[63,1,2]]]);
//# sourceMappingURL=main.34c2154c.chunk.js.map